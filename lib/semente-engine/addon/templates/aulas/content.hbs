{{header-geral
  parentController = this.parentController
  pessoa=this.parentController.selectedDependente
  thisRoute=thisRoute
  Ano=Ano
  togglerole=(action 'toggleRole')
  showToggle=showToggle
  }}

<div class="flow-md">
    <button class="btn btn--link color-blue-navy-60" {{action 'voltar'}}>
      <span class="btn__icon icon-chevron-left"></span>
      <span class="btn__label">Voltar</span>
    </button>

    <section class="l-dots-between l-dots-between--is-flipped">
      <header class="l-dots-between__side">
        <div class="flow-xl">
          <div class="flow-xs">
            <h2 class="title-4">Tarefa</h2>
            <div class="checkbox">
              <input class="checkbox__input" id="checkbox-tarefa" type="checkbox" checked={{if tarefa.realizado "checked"}} onchange={{action 'refreshTarefa'}}>
              <label class="checkbox__label" for="checkbox-tarefa">Realizei a tarefa</label>
            </div>
          </div>

          <div class="flow-xs">
            <h2 class='title-4'>Sua avaliação da Aula</h2>
            <div class="rating" id="rating">
              <input  class="rating__input"
                      id="rating-10"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 10) "checked"}}
                      onchange={{ action 'avaliar' 10 }}>
              <label  class="rating__label"
                      for="rating-10"></label>
              <input  class="rating__input"
                      id="rating-9"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 9) "checked"}}
                      onchange={{ action 'avaliar' 9 }}>
              <label  class="rating__label"
                      for="rating-9"></label>
              <input  class="rating__input"
                      id="rating-8"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 8) "checked"}}
                      onchange={{ action 'avaliar' 8 }}>
              <label  class="rating__label"
                      for="rating-8"></label>
              <input  class="rating__input"
                      id="rating-7"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 7) "checked"}}
                      onchange={{ action 'avaliar' 7 }}>
              <label  class="rating__label"
                      for="rating-7"></label>
              <input  class="rating__input"
                      id="rating-6"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 6) "checked"}}
                      onchange={{ action 'avaliar' 6 }}>
              <label  class="rating__label"
                      for="rating-6"></label>
              <input  class="rating__input"
                      id="rating-5"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 5) "checked"}}
                      onchange={{ action 'avaliar' 5 }}>
              <label  class="rating__label"
                      for="rating-5"></label>
              <input  class="rating__input"
                      id="rating-4"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 4) "checked"}}
                      onchange={{ action 'avaliar' 4 }}>
              <label  class="rating__label"
                      for="rating-4"></label>
              <input  class="rating__input"
                      id="rating-3"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 3) "checked"}}
                      onchange={{ action 'avaliar' 3 }}>
              <label  class="rating__label"
                      for="rating-3"></label>
              <input  class="rating__input"
                      id="rating-2"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 2) "checked"}}
                      onchange={{ action 'avaliar' 2 }}>
              <label  class="rating__label"
                      for="rating-2"></label>
              <input  class="rating__input"
                      id="rating-1"
                      type="radio"
                      name="radio-avaliacao"
                      checked={{if (equalstr avaliacao.nota 1) "checked"}}
                      onchange={{ action 'avaliar' 1 }}>
              <label  class="rating__label"
                      for="rating-1"></label>
            </div>
          </div>

          <div class="flow-md">
            <h2 class='title-4'>Anotações</h2>

            {{#if (equalstr anotacoes.length "0")}}
              {{#unless newAnotacao}}
                <p>Zero anotações</p>
              {{/unless}}
            {{else}}
              <ul class="flow-lg">
                {{#each anotacoes as |anotacao|}}
                  <li>
                    {{anotacao-card
                      anotacao=anotacao
                      deleteAnotacao=(action 'deleteAnotacao')}}
                  </li>
                {{/each}}
              </ul>
            {{/if}}

            <div class="flow-xs" style={{unless newAnotacao "display: none;"}}>
              <textarea class="form-group__input" id="nova-anotacao" rows="4" wrap required autofocus></textarea>
              <button class="btn btn--ghost btn--xxs" id="header-indicadores" {{action 'createAnotacao'}}>
                <span class="btn__label">Adicionar anotação</span>
              </button>
            </div>

            <button style={{if newAnotacao "display: none;"}} class="btn btn--ghost btn--xxs" id="header-indicadores" {{action 'toggleCreateAnotacao'}}>
              <span class="btn__label">Nova anotação</span>
            </button>
          </div>
        </div>
      </header>

      <section class="l-dots-between__content flow-lg">
        <header class="flex flex-row items-baseline">
          <h1 class="title-1">{{aula.titulo}}</h1>
          <span class="fs--md fs-i color-gray-50 m-left--sm">{{aula.plataformaAno.segmento.titulo}} | {{aula.plataformaAno.name}}</span>
          {{!--
          <button class="btn btn--text">Escolher outra aula</button>
          <select name="aulas" id="aulas" onchange={{action 'refreshSelectedAula' value='target.value'}}>
            {{#each selectedDependente.plataformaAnos as |ano|}}
              {{#each ano.aulas as |a|}}
                <option value="{{a.id}}" selected={{if (equalstr aula.id a.id) "selected"}}>{{ano.name}} | {{a.titulo}}</option>
              {{/each}}
            {{/each}}
          </select>
          --}}
        </header>
        <ul class="flow-sm">
          {{#if aula.competencias}}
            <li>
              <div class="flex flex-row items-center">
                <span class="flex flex-row items-center">
                  {{icon-competencias}}
                  <span class="m-left--xs">Competências:</span>
                </span>
                <span class="m-left--xs">
                  {{#each aula.competencias as |comp|}}
                    <span class="capsule capsule--xxs capsule--{{comp.dominio.dominioFormatIdx}}">{{comp.name}}</span>
                  {{/each}}
                </span>
              </div>
            </li>
          {{/if}}

          {{#if (equalstr toggleRole 'instrutor')}}
            <li>
              <div class="flex flex-row items-center">
                <span class="flex flex-row items-center">
                  {{icon-prevista-para}}
                  <span class="m-left--xs">Mês limite sugerido para aplicação:</span>
                  <span class="m-left--xs fw--5">
                    {{aula.mesFimPrevistoFormat}}
                  </span>
                </span>
              </div>
            </li>
          {{/if}}

          <li id="aplicacaoAula">
            {{content-aplicacao pessoa=this.parentController.selectedDependente aula=aula TurmasAplicadas=TurmasAplicadas UltimaAplicacao=UltimaAplicacao}}
          </li>
        </ul>

        <div>
          <h2 class="title-2 m-bottom--xxs hide-on--sm">Contéudos</h2>
          <ul class="tabs">
            <li>
              <button class="tabs__tab {{if (equalstr selectedAgrupamento 'Básico') 'tabs__tab--is-active'}}"
                      type="button"
                      {{action 'refreshSelectedAgrupamento' 'Básico'}}>
                <span class="hide-on--sm">Básicos</span>
                <span class="hide-on--xs">Conteúdos básicos</span>
              </button>
            </li>
            <li>
              <button class="tabs__tab {{if (equalstr selectedAgrupamento 'Complementar') 'tabs__tab--is-active'}}"
                      type="button"
                      {{action 'refreshSelectedAgrupamento' 'Complementar'}}>
                <span class="hide-on--sm">Complementares</span>
                <span class="hide-on--xs">Conteúdos complementares</span>
              </button>
            </li>
            {{#if aula.atividade}}
              <li>
                <button class="tabs__tab {{if (equalstr selectedAgrupamento 'Ead') 'tabs__tab--is-active'}}"
                        type="button"
                        {{action 'refreshSelectedAgrupamento' 'Ead'}}>
                  <span>EAD</span>
                </button>
              </li>
            {{/if}}
          </ul>
        </div>

        <div>
          {{#each conteudos as |conteudo|}}
            {{content-conteudo-card
                conteudo=conteudo
                selectedAgrupamento=selectedAgrupamento
                toggleModal=(action 'toggleModal')}}
          {{/each}}
          {{#if (equalstr selectedAgrupamento 'Ead')}}
            {{#each aula.atividade.secoes as |secao|}}
              {{secao-card
                secao=secao
                toggleModalEad=(action 'toggleModalEad')}}
            {{/each}}
          {{/if}}
        </div>

      </section>

    </section>

</div>


<!-- Modal de visualizar o conteudo -->
<aside id="content-modal" class="modal">
  <div class="modal__content modal__content--sm">

    <header class="modal__header">
      {{selectedConteudo.titulo}}
    </header>

    <div class="modal__body" id="vimeoVideo">
      {{#if selectedConteudo}}
        {{plataforma-conteudo-video-player conteudo=selectedConteudo pessoa=this.parentController.selectedDependente stopVideo=stopVideo}}
      {{/if}}
    </div>

    <div class="modal__footer">
      <button onclick={{action 'closeConteudoModal'}}>
        Fechar Conteúdo
      </button>
    </div>

  </div>
  <div class="modal__overlayer"></div>
</aside>
<aside id="content-modal-ead" class="modal">

  <div class="modal__content modal__content--sm">

    <header class="modal__header">
      {{selectedConteudo.titulo}}
    </header>

    <div class="modal__body">
      {{#if videoId}}
        {{ead-video-player videoId=videoId stopVideo=stopVideo}}
      {{/if}}
    </div>

    <div class="modal__footer">
      <button onclick={{action 'closeConteudoModalEad'}}>
        Fechar Conteúdo
      </button>
    </div>

  </div>

  <div class="modal__overlayer"></div>
</aside>