{{gerdata-header role=role informations=false instituicao=model.instituicao}}

<section class="sections__subsection flow-md animated fadeInLeftShort faster d100 m-top--sm">
    <div class="flex flex-row items-center justify-end">
        <div class="institutions__btn-group">
            {{#link-to 'gerdata.users.createuser' model.instituicao.id}}
                <button class="btn btn--xxs">
                    <span class="btn__label">Novo Usuário</span>
                </button>
            {{/link-to}}
            <button class="btn btn--xxs ">{{!-- {{action 'cadastroLote' }} --}}
                <span class="btn__label">Cadastro em lote</span>
            </button>
            <button class="btn btn--xxs" type="submit" {{action 'baixarTemplateAtivos' }}>
                Usuários Ativos</button>
        </div>
    </div>

    {{!-- <div class="l-dots-between">
        <header class="l-dots-between__side">
            <form class="flex flex-col flow-md" autocomplete="off" aria-autocomplete="none">
                <div class="form-group">
                    <label class="form-group__label" for="search">Busca</label>
                    {{input class="form-group__input"
                    aria-autocomplete="none"
                    aria-describedby="basic-addon1"
                    autocomplete="off"
                    id="search_input_pessoas_ger"
                    type="text"
                    value=searchVal}}
                    <a class="form__aux-link" onclick={{action 'exitsearch' }}>Limpar busca</a>
                </div>

                {{#if instituicaoMae}}
                <div class="form-group">
                    <label class="form-group__label">Instituições</label>
                    <div class="form-group__wrapper form-group__wrapper--select">
                        <select class="form-group__input" name="year" id="instituicao_filha_selector"
                            onchange={{action 'refreshSelectedInstFilha' value='target.value' }} data-type="select"
                            data-required="true">
                            <option selected="selected" value="0">Todas</option>
                            {{#each instituicaoFilhas as |instf|}}
                            <option style="display: block" value="{{instf.id}}" selected={{if (equalstr instf
                                selectedInstFilha) "selected" }}>
                                {{instf.name}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
                {{/if}}

                <div class="form-group">
                    <label class="form-group__label">Segmentos</label>
                    <div class="form-group__wrapper form-group__wrapper--select">
                        <select class="form-group__input" name="year" id="segmento_selector"
                            onchange={{action 'refreshSelectedSegmento' value='target.value' }} data-type="select"
                            data-required="true">
                            <option selected="selected" value="0">Todos</option>
                            {{#each segmentos as |seg|}}
                            <option style="display: block" value="{{seg.id}}" selected={{if (equalstr seg
                                selectedSegmento) "selected" }}>
                                {{seg.titulo}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-group__label">Ano</label>
                    <div class="form-group__wrapper form-group__wrapper--select">
                        <select class="form-group__input" name="year" id="ano_selector"
                            onchange={{action 'refreshFilterAno' value='target.value' }} data-type="select"
                            data-required="true">
                            <option selected="selected" value="0">Todas</option>
                            {{#each anos as |ano|}}
                            <option style="display: block" value="{{ano.id}}" selected={{if (equalstr ano
                                selectedAno) "selected" }}>
                                {{ano.name}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-group__label">Turma</label>
                    <div class="form-group__wrapper form-group__wrapper--select">
                        <select class="form-group__input" name="year" id="turma_selector"
                            onchange={{action 'refreshFilterTurma' value='target.value' }} data-type="select"
                            data-required="true">
                            <option selected="selected" value="0">Todas</option>
                            {{#each turmas as |turma|}}
                            <option style="display: block" value="{{turma.id}}" selected={{if (equalstr turma
                                selectedTurma) "selected" }}>
                                {{turma.name}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
            </form>
        </header>
        <section class="l-dots-between__content flow-md">
            <div class="flex flex-row items-end justify-between">
                {{#unless (equalstr totalPessoas '0')}}
                {{page-numbers content=pagedContent class="pagination--sm pagination--right"}}
                {{/unless}}

                <div class="form-group flex flex-row items-center">
                    <label class="form-group__label" for="amount">Exibir</label>
                    <div class="self-start">
                        <div class="form-group__wrapper form-group__wrapper--select">
                            <select class="form-group__input form-group__input--amount" id="amount" name="order"
                                {{action 'setExibir' on='change' }}>
                                <option value="5" selected={{paginationSelected.p5}}>5 resultados</option>
                                <option value="10" selected={{paginationSelected.p10}}>10 resultados</option>
                                <option value="25" selected={{paginationSelected.p25}}>25 resultados</option>
                                <option value="50" selected={{paginationSelected.p50}}>50 resultados</option>
                                <option value="100" selected={{paginationSelected.p100}}>100 resultados</option>
                                <option value="500" selected={{paginationSelected.p500}}>500 resultados</option>
                                <option value="1000" selected={{paginationSelected.p1000}}>1000 resultados</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="loader-local {{if (equalstr gerdataLoaderState 1) 'loader-local--is-show' ''}}">
                <div class="loader-local__loader">
                    <span class="icon-reload icon--xl"></span>
                    Buscando
                </div>
                <table class="institutions__table table table--striped table--users">
                    <thead>
                        <tr>
                            <th class="table__name" scope="col">
                                <div {{action 'setSort' 'name' }}>
                                    Nome
                                    {{#if (equalstr sortCol 'name')}}
                                    <i class="{{if sortAsc 'fa fa-caret-down' 'fa fa-caret-up'}}"
                                        aria-hidden="true"></i>
                                    {{/if}}
                                </div>
                            </th>
                            <th class="table__role" scope="col">Perfil</th>
                            <th class="table__enabled" scope="col">Hab<span class="hide-on--xs">ilitado</span></th>
                            <th class="table__actions" scope="col">Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each pessoas_sorted as |pessoa|}}
                        <tr id="linha-pessoa-{{pessoa.id}}">
                            <td class="table__name">
                                <p><strong class="title-4 capitalized">{{pessoa.nameLower}}</strong></p>
                                <p class='color-green-40 truncate'>{{pessoa.userName}}</p>

                            </td>
                            <td class="table__role">
                                {{#if (equalstr pessoa.role 'instrutor')}}
                                <p class="">professor</p>
                                {{else if (equalstr pessoa.role 'recursosHumanos')}}
                                <p class="">RH</p>
                                {{else}}
                                <p class="">{{pessoa.role}}</p>
                                {{/if}}

                            </td>
                            <td class="ta-c">
                                <span
                                    class="icon--lg {{if pessoa.enabled 'icon-check icon--success' 'icon-x icon--error'}}"></span>
                            </td>
                            <td class="table__actions">
                                <button class="btn btn--text btn--xxs" {{action 'deletePessoa'
                                    pessoa.id}}>Remover</button>
                                <button class="btn btn--ghost btn--xxs" {{action 'userModal' pessoa.id}}>Editar</button>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </section>
    </div> --}}

    <!-- -------------------------------------------------- administration users alert -->
    {{!-- <div class="alert-container">

        <!-- CONFIRMATION || LIST -->
        <div id="staticAlertUser" class="alert alert--x  alert--blue-navy-50 alert--has-interaction">

            <p class="alert__msg">
                {{#if alertTitle}}<strong class="m-right--xs">{{alertTitle}}</strong>{{/if}}
                {{#if staticTxt2}}<span>{{staticTxt2}}</span>{{/if}}
            </p>

            <p class="alert__msg">
                <!-- mail action -->
                {{#if selectedToMail}}
                {{#if mail_single_pessoa}}
                <strong>{{mail_single_pessoa.email}}</strong>
                {{/if}}
                {{/if}}

                <!-- delete user -->
                {{#if selectedToDelete}}
            <p>Você tem certeza que deseja apagar <span class="strong">{{confirm_entity.name}}</span>?</p>
            {{/if}}

            <!-- reset user progress -->
            {{#if selectedToReset}}
            <strong>{{new_user_name}}</strong>
            {{/if}}
            </p>

            <ul style="overflow:auto; max-height:60vh;">
                {{#each staticList as |item|}}
                <li class="p-v--xxs">{{item.email}}</li>
                {{/each}}
            </ul>

            <div class="alert__footer">
                <!-- check users list -->
                {{#if (equalstr staticType 'checklist')}}
                <button class="btn btn--xs btn--text" {{action staticAlert 'close' }}>Desmarcar todos</button>
                <button class="btn btn--xs" {{action 'emailAction' }}><span class="btn__icon icon-at-sign"></span>Enviar
                    emails</button>
                {{/if}}
                <!-- -->
                <!-- send email(s) -->
                {{#if (equalstr staticType 'mail')}}
                <button class="btn btn--xs btn--text" {{action 'cancelarMail' }}>Cancelar</button>
                <button class="btn" type="submit" {{action 'sendMail' }}>Enviar email{{#if
                    mail_single_pessoa}}
                    {{else}}s{{/if}}</button>
                {{/if}}
                <!-- -->
                <!-- retry failed email -->
                {{#if (equalstr staticType 'failed')}}
                <button class="btn btn--xs btn--text" {{action 'cancelarMail' }}>Cancelar</button>
                <button class="btn" {{action 'sendMail' }}>Tentar Novamente</button>
                {{/if}}
                <!-- -->
                <!-- delete user -->
                {{#if (equalstr staticType 'delete')}}
                <button class="btn btn--xs btn--text" type="submit" {{action 'cancelDel' }}>Cancelar</button>
                <button id="button-confirm-delete" class="btn" type="submit" {{action 'confirmDel'
                    confirm_entity}}>Apagar</button>
                {{/if}}
            </div>
        </div>

        <div id="timeoutAlertUser" class="alert alert--x alert--blue-navy-50 alert--has-icon alert--no-interaction">
            {{#if (equalstr timeoutIcon 'load')}}<span class="alert__icon icon-reload icon--lg"></span>{{/if}}
            {{#if (equalstr timeoutIcon 'error')}}<span class="alert__icon icon-x icon--lg"></span>{{/if}}
            {{#if (equalstr timeoutIcon 'success')}}<span class="alert__icon icon-check icon--lg"></span>{{/if}}
            <div style="max-width: 80%;"><strong>{{timeoutTxt}}</strong></div>
        </div>

    </div> --}}
</section>

{{!-- 
<aside id="lote_modal" class="modal">
    <div class="modal__overlayer"></div>
    <div class="modal__content modal__content--lg">
        <div class="modal__header">
            <button class="modal__close btn-close icon-x" type="submit" {{action 'cancelLote' }}></button>
            <h3 class="modal__title">Cadastro e Matrícula em Lote</h3>
        </div>
        <div class="modal__body modal__body--inside-scroll inside-scroll">
            <div class="inside-scroll__fixed">
                <p>Por meio dos botões abaixo, baixe o arquivo de carga, preencha-o, busque-o em seu computador e
                    realize a importação.</p>
                <div class="institutions__mass-enroll institutions__btn-group flow-h-sm">
                    <button class="btn btn-primary btn__claro" type="submit" {{action 'baixarTemplate' }}>Baixar
                        template</button>
                    <span><img src="/assets/img/seta-lado.png" alt=""></span>
                    <label class="btn label_get_lote" for="get_lote">Buscar arquivo</label>
                    <input id="get_lote" multiple="false" onchange={{action "buscarArquivo" }} accept="text/csv"
                        type="file" style="display: none;" />

                    {{#if (equalstr selected_file '')}}
                    <button class="btn btn-primary btn--disabled" type="submit" disabled>Importar</button>
                    {{else}}
                    <button class="btn btn-primary" type="submit" {{action 'importarLote' }}>Importar</button>
                    {{/if}}

                    <div>
                        <i class="fa fa-spinner fa-pulse fa-3x fa-fw" style="display: none"
                            id="spinner-importar-lote"></i>
                    </div>
                </div>
                <div class="t-center instrucoes">
                    <p>Em caso de dúvidas, acesse o nosso passo a passo <span class="destaque"> clicando abaixo</span>
                    </p>
                    <div class="passoapasso" id="passoapasso">
                        <div class="passoapasso__imagem"></div>
                    </div>
                    <span {{action 'abrirPasso' }}>
                        <img class="seta" {{action 'giro' }} src="/assets/img/seta-baixo.png" alt="" id="seta">
                    </span>
                </div>

            </div>

            <div class="inside-scroll__scroll">
                {{#if selected_file}}
                <div class="institutions__attached-file alert alert--sm alert--has-icon">
                    <span class="alert__icon icon-paperclip"></span>
                    <span class="institutions__attached-label">Arquivo selecionado: </span>
                    <strong>{{selected_file}}</strong>
                </div>
                {{/if}}
                {{#if error_lote}}
                <p>1- {{error_lote}}</p>
                {{/if}}
                {{#if wait_lote}}
                <p>Um momento...</p>
                {{else if erro_lista}}
                <p>2- {{erro_lista}}</p>
                {{else}}
                <table class="table table--striped table--mass-enroll">
                    <thead class="thead-dark">
                        <tr>
                            <th class="table__enroller" scope="col">Cadastrador</th>
                            <th class="table__file" scope="col">Arquivo</th>
                            <th class="table__import" scope="col">Importação</th>
                            <th class="table__status" scope="col">Status</th>
                            <th class="table__users" scope="col">Usuários</th>
                            <th class="table__processed" scope="col">Processados</th>
                            <th class="table__not-processed" scope="col">Não Processados</th>
                            <th class="table__log" scope="col">Log</th>
                        </tr>
                    </thead>
                    <tbody class="gersistema-user-list-box">
                        {{#each lista_lote as |lista|}}
                        <tr>
                            <td class="table__enroller">
                                {{lista.pessoaNome}}
                            </td>
                            <td class="table__file">{{lista.nomeArquivo}}</td>
                            <td class="table__import">{{lista.data}}</td>
                            <td class="table__status">{{lista.status}}</td>
                            <td class="table__users">{{lista.quantidadeDeUsuarios}}</td>
                            <td class="table__processed">{{lista.usuariosProcessados}}</td>
                            <td class="table__not-processed">{{lista.usuariosNaoProcessados}}</td>
                            <td class="table__log">
                                {{#if lista.link}}
                                <a href={{lista.link}}>
                                    <i class="icon-file-text"></i>
                                </a>
                                {{else}}
                                <i class="fa fa-times-o"></i>
                                {{/if}}
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
                {{/if}}
            </div>
        </div>
    </div>
    <div class="modal__footer">
        <button class="btn btn-primary" type="submit" {{action 'cancelLote' }}>Fechar</button>
    </div>
</aside> --}}

{{outlet}}
